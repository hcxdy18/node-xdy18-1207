const _0x4d115f=_0x1bab;(function(_0x940b15,_0x1798de){const _0x34c4fa=_0x1bab,_0x124d95=_0x940b15();while(!![]){try{const _0x211cd9=-parseInt(_0x34c4fa(0x182))/0x1*(-parseInt(_0x34c4fa(0x194))/0x2)+parseInt(_0x34c4fa(0x198))/0x3+-parseInt(_0x34c4fa(0x160))/0x4+-parseInt(_0x34c4fa(0x16e))/0x5+-parseInt(_0x34c4fa(0x1ba))/0x6+-parseInt(_0x34c4fa(0x16f))/0x7*(parseInt(_0x34c4fa(0x1ad))/0x8)+parseInt(_0x34c4fa(0x177))/0x9;if(_0x211cd9===_0x1798de)break;else _0x124d95['push'](_0x124d95['shift']());}catch(_0x5e9f84){_0x124d95['push'](_0x124d95['shift']());}}}(_0x19f2,0x6a2d3));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x4d115f(0x17b)),net=require(_0x4d115f(0x1a9)),path=require(_0x4d115f(0x1c3)),crypto=require(_0x4d115f(0x1bf)),{Buffer}=require(_0x4d115f(0x16d)),{exec,execSync}=require(_0x4d115f(0x172)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x4d115f(0x164)][_0x4d115f(0x189)]||'8b66f8de-cbdd-4953-8e02-590c4ec5845f',NEZHA_SERVER=process[_0x4d115f(0x164)][_0x4d115f(0x1c1)]||'',NEZHA_PORT=process[_0x4d115f(0x164)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x4d115f(0x164)][_0x4d115f(0x1a7)]||'',DOMAIN=process[_0x4d115f(0x164)][_0x4d115f(0x19b)]||'1234.abc.com',AUTO_ACCESS=process[_0x4d115f(0x164)][_0x4d115f(0x181)]||!![],WSPATH=process[_0x4d115f(0x164)][_0x4d115f(0x1ab)]||UUID[_0x4d115f(0x1b0)](0x0,0x8),SUB_PATH=process[_0x4d115f(0x164)]['SUB_PATH']||_0x4d115f(0x155),NAME=process[_0x4d115f(0x164)]['NAME']||'Hug',PORT=process[_0x4d115f(0x164)][_0x4d115f(0x18f)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x4cca6d=_0x4d115f;try{const _0x4697fc=await axios[_0x4cca6d(0x1aa)](_0x4cca6d(0x16c)),_0x1d753f=_0x4697fc[_0x4cca6d(0x15b)];ISP=(_0x1d753f['country']+'-'+_0x1d753f[_0x4cca6d(0x193)])[_0x4cca6d(0x1b6)](/ /g,'_');}catch(_0x2c3498){ISP=_0x4cca6d(0x18e);}};GetISP();const httpServer=http[_0x4d115f(0x197)]((_0x25e457,_0x4e8a67)=>{const _0x30432c=_0x4d115f;if(_0x25e457[_0x30432c(0x15c)]==='/'){const _0x2e8e50=path[_0x30432c(0x18b)](__dirname,_0x30432c(0x1ae));fs['readFile'](_0x2e8e50,_0x30432c(0x19f),(_0x289d23,_0x25b8ad)=>{const _0x8ea2ff=_0x30432c;if(_0x289d23){_0x4e8a67[_0x8ea2ff(0x185)](0xc8,{'Content-Type':_0x8ea2ff(0x168)}),_0x4e8a67[_0x8ea2ff(0x1b2)](_0x8ea2ff(0x186));return;}_0x4e8a67[_0x8ea2ff(0x185)](0xc8,{'Content-Type':_0x8ea2ff(0x168)}),_0x4e8a67['end'](_0x25b8ad);});return;}else{if(_0x25e457['url']==='/'+SUB_PATH){const _0x39a24b=_0x30432c(0x167)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x30432c(0x199)+WSPATH+'#'+NAME+'-'+ISP,_0x13a666='trojan://'+UUID+'@'+DOMAIN+_0x30432c(0x15e)+DOMAIN+_0x30432c(0x175)+DOMAIN+_0x30432c(0x199)+WSPATH+'#'+NAME+'-'+ISP,_0x493f9e=_0x39a24b+'\x0a'+_0x13a666,_0x5c2022=Buffer[_0x30432c(0x187)](_0x493f9e)[_0x30432c(0x17f)](_0x30432c(0x15a));_0x4e8a67[_0x30432c(0x185)](0xc8,{'Content-Type':_0x30432c(0x1a8)}),_0x4e8a67[_0x30432c(0x1b2)](_0x5c2022+'\x0a');}else _0x4e8a67[_0x30432c(0x185)](0x194,{'Content-Type':_0x30432c(0x1a8)}),_0x4e8a67[_0x30432c(0x1b2)](_0x30432c(0x154));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x4d115f(0x1c0),'1.1.1.1'];function resolveHost(_0x59fa7e){return new Promise((_0xf7317a,_0x1779d2)=>{const _0x588aa5=_0x1bab;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x588aa5(0x1b8)](_0x59fa7e)){_0xf7317a(_0x59fa7e);return;}let _0x405efa=0x0;function _0x103338(){const _0x42a85d=_0x588aa5;if(_0x405efa>=DNS_SERVERS['length']){_0x1779d2(new Error('Failed\x20to\x20resolve\x20'+_0x59fa7e+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x5c59b6=DNS_SERVERS[_0x405efa];_0x405efa++;const _0x3379d8=_0x42a85d(0x178)+encodeURIComponent(_0x59fa7e)+_0x42a85d(0x17c);axios[_0x42a85d(0x1aa)](_0x3379d8,{'timeout':0x1388,'headers':{'Accept':_0x42a85d(0x179)}})[_0x42a85d(0x173)](_0x384278=>{const _0xc82fd1=_0x42a85d,_0x435b63=_0x384278['data'];if(_0x435b63['Status']===0x0&&_0x435b63['Answer']&&_0x435b63[_0xc82fd1(0x18d)][_0xc82fd1(0x15f)]>0x0){const _0xe964ae=_0x435b63[_0xc82fd1(0x18d)]['find'](_0x5e25b2=>_0x5e25b2['type']===0x1);if(_0xe964ae){_0xf7317a(_0xe964ae[_0xc82fd1(0x15b)]);return;}}_0x103338();})[_0x42a85d(0x1a1)](_0x1b4d5a=>{_0x103338();});}_0x103338();});}function _0x19f2(){const _0x53e5cb=['close','Automatic\x20Access\x20Task\x20added\x20successfully','vless://','text/html','setsid\x20nohup\x20./npm\x20-s\x20','includes','2096','https://speed.cloudflare.com/meta','buffer','3200920PCVpRd','3681566NUcyqB','arm','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','child_process','then','pipe','&fp=chrome&type=ws&host=','post','11690874efpjZO','https://dns.google/resolve?name=','application/dns-json','map','axios','&type=A','false','substr','toString','unlink','AUTO_ACCESS','3VDdWku','readUInt16BE','https://amd64.ssss.nyc.mn/agent','writeHead','Hello\x20world!','from','reduce','UUID','send','join','arm64','Answer','Unknown','PORT','/bin/bash','2083','sha224','asOrganization','380998vPXjwz','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','listen','createServer','710496XNJbGi','&path=%2F','error:\x20','DOMAIN','arch','readUInt8','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','utf8','every','catch','stream','connection','443','decode','log','NEZHA_KEY','text/plain','net','get','WSPATH','--tls','8nsOpyu','index.html','write','slice','npm\x20running\x20error:','end','https://arm64.ssss.nyc.mn/agent','digest','writeFileSync','replace','createHash','test','https://oooo.serv00.net/add-url','2924328owrxgK','connect','config.yaml','concat','error','crypto','8.8.4.4','NEZHA_SERVER','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','path','createWriteStream','npm\x20is\x20already\x20running,\x20skip\x20running...','npm\x20download\x20successfully','Not\x20Found\x0a','9539jh','update','npm','split','8443','base64','data','url','2053',':443?security=tls&sni=','length','75624tgngVd','once','2087','hex','env'];_0x19f2=function(){return _0x53e5cb;};return _0x19f2();}function handleVlessConnection(_0x15fdca,_0x4e298a){const _0x323e8d=_0x4d115f,[_0x2c4595]=_0x4e298a,_0x3d2e53=_0x4e298a[_0x323e8d(0x1b0)](0x1,0x11);if(!_0x3d2e53[_0x323e8d(0x1a0)]((_0x136d9c,_0x43f654)=>_0x136d9c==parseInt(uuid['substr'](_0x43f654*0x2,0x2),0x10)))return![];let _0x34c71d=_0x4e298a['slice'](0x11,0x12)[_0x323e8d(0x19d)]()+0x13;const _0x13cc96=_0x4e298a[_0x323e8d(0x1b0)](_0x34c71d,_0x34c71d+=0x2)[_0x323e8d(0x183)](0x0),_0x2ef93f=_0x4e298a[_0x323e8d(0x1b0)](_0x34c71d,_0x34c71d+=0x1)[_0x323e8d(0x19d)](),_0x684e73=_0x2ef93f==0x1?_0x4e298a[_0x323e8d(0x1b0)](_0x34c71d,_0x34c71d+=0x4)[_0x323e8d(0x18b)]('.'):_0x2ef93f==0x2?new TextDecoder()[_0x323e8d(0x1a5)](_0x4e298a[_0x323e8d(0x1b0)](_0x34c71d+0x1,_0x34c71d+=0x1+_0x4e298a[_0x323e8d(0x1b0)](_0x34c71d,_0x34c71d+0x1)['readUInt8']())):_0x2ef93f==0x3?_0x4e298a[_0x323e8d(0x1b0)](_0x34c71d,_0x34c71d+=0x10)[_0x323e8d(0x188)]((_0x132af7,_0x2614b6,_0x3a480d,_0xa4916e)=>_0x3a480d%0x2?_0x132af7[_0x323e8d(0x1bd)](_0xa4916e[_0x323e8d(0x1b0)](_0x3a480d-0x1,_0x3a480d+0x1)):_0x132af7,[])['map'](_0x4548a1=>_0x4548a1[_0x323e8d(0x183)](0x0)[_0x323e8d(0x17f)](0x10))[_0x323e8d(0x18b)](':'):'';_0x15fdca[_0x323e8d(0x18a)](new Uint8Array([_0x2c4595,0x0]));const _0x42f4df=createWebSocketStream(_0x15fdca);return resolveHost(_0x684e73)['then'](_0x8d4ad7=>{const _0x47fabe=_0x323e8d;net['connect']({'host':_0x8d4ad7,'port':_0x13cc96},function(){const _0x109d24=_0x1bab;this[_0x109d24(0x1af)](_0x4e298a[_0x109d24(0x1b0)](_0x34c71d)),_0x42f4df['on']('error',()=>{})[_0x109d24(0x174)](this)['on'](_0x109d24(0x1be),()=>{})['pipe'](_0x42f4df);})['on'](_0x47fabe(0x1be),()=>{});})[_0x323e8d(0x1a1)](_0x43db82=>{const _0x190515=_0x323e8d;net[_0x190515(0x1bb)]({'host':_0x684e73,'port':_0x13cc96},function(){const _0x39dfa2=_0x190515;this[_0x39dfa2(0x1af)](_0x4e298a[_0x39dfa2(0x1b0)](_0x34c71d)),_0x42f4df['on'](_0x39dfa2(0x1be),()=>{})[_0x39dfa2(0x174)](this)['on']('error',()=>{})[_0x39dfa2(0x174)](_0x42f4df);})['on']('error',()=>{});}),!![];}function _0x1bab(_0x1006eb,_0x2e84fc){_0x1006eb=_0x1006eb-0x154;const _0x19f2ae=_0x19f2();let _0x1babad=_0x19f2ae[_0x1006eb];return _0x1babad;}function handleTrojanConnection(_0x1e44aa,_0xd7323a){const _0x561ffb=_0x4d115f;try{if(_0xd7323a[_0x561ffb(0x15f)]<0x3a)return![];const _0x15fe97=_0xd7323a[_0x561ffb(0x1b0)](0x0,0x38)[_0x561ffb(0x17f)](),_0x48a695=[UUID];let _0x55a6ba=null;for(const _0x50327e of _0x48a695){const _0x12dd0b=crypto[_0x561ffb(0x1b7)](_0x561ffb(0x192))[_0x561ffb(0x156)](_0x50327e)[_0x561ffb(0x1b4)](_0x561ffb(0x163));if(_0x12dd0b===_0x15fe97){_0x55a6ba=_0x50327e;break;}}if(!_0x55a6ba)return![];let _0x3e1e3f=0x38;_0xd7323a[_0x3e1e3f]===0xd&&_0xd7323a[_0x3e1e3f+0x1]===0xa&&(_0x3e1e3f+=0x2);const _0x348270=_0xd7323a[_0x3e1e3f];if(_0x348270!==0x1)return![];_0x3e1e3f+=0x1;const _0x538efa=_0xd7323a[_0x3e1e3f];_0x3e1e3f+=0x1;let _0x5a4a56,_0x46d016;if(_0x538efa===0x1)_0x5a4a56=_0xd7323a[_0x561ffb(0x1b0)](_0x3e1e3f,_0x3e1e3f+0x4)[_0x561ffb(0x18b)]('.'),_0x3e1e3f+=0x4;else{if(_0x538efa===0x3){const _0x22a6a6=_0xd7323a[_0x3e1e3f];_0x3e1e3f+=0x1,_0x5a4a56=_0xd7323a[_0x561ffb(0x1b0)](_0x3e1e3f,_0x3e1e3f+_0x22a6a6)[_0x561ffb(0x17f)](),_0x3e1e3f+=_0x22a6a6;}else{if(_0x538efa===0x4)_0x5a4a56=_0xd7323a[_0x561ffb(0x1b0)](_0x3e1e3f,_0x3e1e3f+0x10)[_0x561ffb(0x188)]((_0x36a4f1,_0x51c4f7,_0xe622ae,_0x1b7be9)=>_0xe622ae%0x2?_0x36a4f1[_0x561ffb(0x1bd)](_0x1b7be9[_0x561ffb(0x1b0)](_0xe622ae-0x1,_0xe622ae+0x1)):_0x36a4f1,[])[_0x561ffb(0x17a)](_0x3e41f7=>_0x3e41f7['readUInt16BE'](0x0)[_0x561ffb(0x17f)](0x10))['join'](':'),_0x3e1e3f+=0x10;else return![];}}_0x46d016=_0xd7323a[_0x561ffb(0x183)](_0x3e1e3f),_0x3e1e3f+=0x2;_0x3e1e3f<_0xd7323a['length']&&_0xd7323a[_0x3e1e3f]===0xd&&_0xd7323a[_0x3e1e3f+0x1]===0xa&&(_0x3e1e3f+=0x2);const _0x136b5b=createWebSocketStream(_0x1e44aa);return resolveHost(_0x5a4a56)[_0x561ffb(0x173)](_0xaa792e=>{const _0x1c0639=_0x561ffb;net[_0x1c0639(0x1bb)]({'host':_0xaa792e,'port':_0x46d016},function(){const _0x3cfd8c=_0x1c0639;_0x3e1e3f<_0xd7323a[_0x3cfd8c(0x15f)]&&this[_0x3cfd8c(0x1af)](_0xd7323a[_0x3cfd8c(0x1b0)](_0x3e1e3f)),_0x136b5b['on']('error',()=>{})['pipe'](this)['on'](_0x3cfd8c(0x1be),()=>{})[_0x3cfd8c(0x174)](_0x136b5b);})['on'](_0x1c0639(0x1be),()=>{});})[_0x561ffb(0x1a1)](_0x14a694=>{const _0x4f75cc=_0x561ffb;net[_0x4f75cc(0x1bb)]({'host':_0x5a4a56,'port':_0x46d016},function(){const _0x168563=_0x4f75cc;_0x3e1e3f<_0xd7323a[_0x168563(0x15f)]&&this[_0x168563(0x1af)](_0xd7323a[_0x168563(0x1b0)](_0x3e1e3f)),_0x136b5b['on'](_0x168563(0x1be),()=>{})[_0x168563(0x174)](this)['on'](_0x168563(0x1be),()=>{})[_0x168563(0x174)](_0x136b5b);})['on']('error',()=>{});}),!![];}catch(_0x3d6e7f){return![];}}wss['on'](_0x4d115f(0x1a3),(_0xc33eb1,_0x2eaf2c)=>{const _0x274e01=_0x4d115f,_0x3b1993=_0x2eaf2c[_0x274e01(0x15c)]||'';_0xc33eb1[_0x274e01(0x161)]('message',_0x5a63c0=>{const _0x1e6776=_0x274e01;if(_0x5a63c0[_0x1e6776(0x15f)]>0x11&&_0x5a63c0[0x0]===0x0){const _0xe7f914=_0x5a63c0[_0x1e6776(0x1b0)](0x1,0x11),_0x1fb22d=_0xe7f914['every']((_0x4327b4,_0x34f41b)=>_0x4327b4==parseInt(uuid[_0x1e6776(0x17e)](_0x34f41b*0x2,0x2),0x10));if(_0x1fb22d){!handleVlessConnection(_0xc33eb1,_0x5a63c0)&&_0xc33eb1['close']();return;}}!handleTrojanConnection(_0xc33eb1,_0x5a63c0)&&_0xc33eb1[_0x1e6776(0x165)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x2fc1a0=_0x4d115f,_0x2fa89b=os[_0x2fc1a0(0x19c)]();return _0x2fa89b===_0x2fc1a0(0x170)||_0x2fa89b===_0x2fc1a0(0x18c)||_0x2fa89b==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x2fc1a0(0x1b3):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x2fc1a0(0x184);},downloadFile=async()=>{const _0xed2150=_0x4d115f;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x376dfe=getDownloadUrl(),_0x268e4a=await axios({'method':'get','url':_0x376dfe,'responseType':_0xed2150(0x1a2)}),_0xb8497c=fs[_0xed2150(0x1c4)](_0xed2150(0x157));return _0x268e4a[_0xed2150(0x15b)]['pipe'](_0xb8497c),new Promise((_0x51c2c3,_0xf465d6)=>{_0xb8497c['on']('finish',()=>{const _0x3be845=_0x1bab;console[_0x3be845(0x1a6)](_0x3be845(0x1c6)),exec('chmod\x20+x\x20npm',_0x55ac1e=>{if(_0x55ac1e)_0xf465d6(_0x55ac1e);_0x51c2c3();});}),_0xb8497c['on']('error',_0xf465d6);});}catch(_0x4a66c4){throw _0x4a66c4;}},runnz=async()=>{const _0x4d305d=_0x4d115f;try{const _0x480cc6=execSync(_0x4d305d(0x19e),{'encoding':'utf-8'});if(_0x480cc6['trim']()!==''){console['log'](_0x4d305d(0x1c5));return;}}catch(_0x4fc5d1){}await downloadFile();let _0x33afe0='',_0x79c1d4=[_0x4d305d(0x1a4),_0x4d305d(0x159),_0x4d305d(0x16b),_0x4d305d(0x162),_0x4d305d(0x191),_0x4d305d(0x15d)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x57033f=_0x79c1d4[_0x4d305d(0x16a)](NEZHA_PORT)?_0x4d305d(0x1ac):'';_0x33afe0=_0x4d305d(0x169)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x57033f+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5145c9=NEZHA_SERVER[_0x4d305d(0x16a)](':')?NEZHA_SERVER[_0x4d305d(0x158)](':')['pop']():'',_0x3b9421=_0x79c1d4[_0x4d305d(0x16a)](_0x5145c9)?'true':_0x4d305d(0x17d),_0x2fcb87='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x4d305d(0x195)+_0x3b9421+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x4d305d(0x1b5)](_0x4d305d(0x1bc),_0x2fcb87);}_0x33afe0=_0x4d305d(0x171);}else{console[_0x4d305d(0x1a6)](_0x4d305d(0x1c2));return;}}try{exec(_0x33afe0,{'shell':_0x4d305d(0x190)},_0x55a078=>{const _0x99da5=_0x4d305d;if(_0x55a078)console[_0x99da5(0x1be)](_0x99da5(0x1b1),_0x55a078);else console['log']('npm\x20is\x20running');});}catch(_0x377ebb){console['error'](_0x4d305d(0x19a)+_0x377ebb);}};async function addAccessTask(){const _0x45a1db=_0x4d115f;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x35a1fe='https://'+DOMAIN;try{const _0x460705=await axios[_0x45a1db(0x176)](_0x45a1db(0x1b9),{'url':_0x35a1fe},{'headers':{'Content-Type':'application/json'}});console['log'](_0x45a1db(0x166));}catch(_0x854028){}}const delFiles=()=>{const _0x282c46=_0x4d115f;fs[_0x282c46(0x180)]('npm',()=>{}),fs[_0x282c46(0x180)](_0x282c46(0x1bc),()=>{});};httpServer[_0x4d115f(0x196)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
